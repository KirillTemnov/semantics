<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="lastname.js"></script>
    <style type="text/css">
      #out-text, #in-text {
        width: 800px;
        height: 350px;
        font-family: Monaco, terminal, Courier New;
      }

      #in-text {
        height: 150px;
      }

    </style>
  </head>
<body>
  <textarea id="in-text">
  </textarea>
  <br/>
  <br/>
  <button id="analysis">анализ</button>
  <button id="feelings">все данные</button>
  <button id="verb-infinitive"> инфинитив глагола</button>
  <button id="analyse-noon"> существительное</button>
  <button id="guess-initial-form"> исходное слово </button>
  <button id="clear">очистить</button>
  <br/>
  <br/>
  <textarea id="out-text">
  </textarea>

    <script type="text/javascript">
      var fanalysis       = document.getElementById("analysis"),
          clear           = document.getElementById("clear"),
          ffeelings       = document.getElementById("feelings"),
          fverbinf        = document.getElementById("verb-infinitive"),
          fnoon           = document.getElementById("analyse-noon"),
          input           = document.getElementById("in-text"),
          fguessInitForm  = document.getElementById("guess-initial-form"),
          output          = document.getElementById("out-text");

      clear.addEventListener("click", function() {
          output.value  = "";
        }, false);

      fanalysis.addEventListener("click", function () {
          result = lastName.analysis.analyse(input.value, [lastName.misc, lastName.plugins.ru.words, lastName.plugins.ru.abbrevs, lastName.plugins.ru.propernames, lastName.plugins.ru.feelings])
          out = [ "Всего слов: \t\t" + result.counters.words_total,
                  "Стоп слов: \t\t" + result.counters.stop_words_total,
                  "Предложений: \t\t" + result.misc.sentences.length,
                  "Длина слова: \t\t" + result.counters.word_length_mid.toFixed(2) + " букв",
                  "Длина предложения:\t" + result.counters.words_in_sentence_mid.toFixed(2)+ " слов",
                  "Вода:\t\t\t" + (100 * result.counters.stop_words_persent).toFixed(2) +  " %",
                  "Эмоциональная окраска:\t" + (100 * result.feelings.emoScore).toFixed(2) + " % (" + result.feelings.emoTone + ")",
                  (lastName.util.dictKeys(result.ru.abbrevs).length > 0 ? "Аббревиатуры:\t\t" + lastName.util.dictKeys(result.ru.abbrevs).join(", ") : ""),
                  (lastName.util.dictKeys(result.ru.persons).length > 0 ? "Люди:\t\t\t" + lastName.util.dictKeys(result.ru.persons).map(function (x) {
      return x.replace(/-/g, " ").trim();}).join(", ") : ""),
                  (result.ru.addresses.length > 0 ? "Адреса:\n\t\t\t\t" + result.ru.addresses.join("\n\t\t\t\t") : "")
      ].filter(function(x) { return !!x;});
          output.value = out.join("\n");
        }, false);

      fguessInitForm.addEventListener("click", function () {
          var word = input.value.trim(),
              noun = lastName.plugins.ru.inclines.analyseNoun(word),
              verb = lastName.plugins.ru.inclines.getVerbInfinitive(word),
              adj = lastName.plugins.ru.inclines.getInitialFormOfAdjective(word);// + stop words
          if (verb.found) {
             output.value = "глагол: " + verb.infinitive;
          } else if (adj.found) {
             output.value = "прилагательное: " + adj.infinitive[0];
          } else if (noun.found) {
             output.value = "существительное: " +  (noun.infinitive.length > 0 ? noun.infinitive[0] : noun.pluralInfinitive[0]);
          } else {
             output.value = "хм... похоже ничего не найдено"
          }
//          output.value = "noun :\n" + JSON.stringify(noun) + "\n\nverb :\n" +
//              JSON.stringify(verb) + "\n\nadj :\n" + JSON.stringify(adj) + "\n\n";
        }, false);

      fnoon.addEventListener("click", function () {
          output.value = JSON.stringify(lastName.plugins.ru.inclines.analyseNoun(input.value.trim()));
        }, false);


      fverbinf.addEventListener("click", function () {
          output.value = JSON.stringify(lastName.plugins.ru.inclines.getVerbInfinitive(input.value.trim()));
        }, false);


      ffeelings.addEventListener("click", function () {
          output.value = JSON.stringify(lastName.analysis.analyse(input.value, [lastName.misc, lastName.plugins.ru.words, lastName.plugins.ru.abbrevs, lastName.plugins.ru.dates, lastName.plugins.ru.propernames, lastName.plugins.ru.feelings]));
        }, false);

    </script>
  
</body>
</html>
